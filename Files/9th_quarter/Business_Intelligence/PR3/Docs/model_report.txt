âš ï¸ LibrerÃ­a aif360 no disponible. El anÃ¡lisis de fairness podrÃ­a estar limitado.

============================================================
INICIANDO PIPELINE DE MODELADO PARA RIESGO CREDITICIO
============================================================

ğŸ” Objetivo: Desarrollar un modelo web-friendly para predecir riesgo crediticio

ğŸ” Cargando datos preprocesados para Ã¡rboles

ğŸ” âœ“ Dataset cargado exitosamente: 1000 filas, 67 columnas

ğŸ” âœ“ CaracterÃ­sticas: 66 features, Target: 1000 muestras

ğŸ” âœ“ DistribuciÃ³n del target: {1: 700, 0: 300}

ğŸ” Dividiendo datos en conjuntos de entrenamiento y prueba

ğŸ” âœ“ Conjunto de entrenamiento: 800 muestras

ğŸ” âœ“ Conjunto de prueba: 200 muestras

ğŸ” âœ“ DistribuciÃ³n en entrenamiento: {1: 560, 0: 240}

ğŸ” âœ“ DistribuciÃ³n en prueba: {1: 140, 0: 60}

============================================================
OPTIMIZANDO HIPERPARÃMETROS DEL MODELO XGBOOST
============================================================

ğŸ” Iniciando bÃºsqueda aleatoria de hiperparÃ¡metros...

ğŸ” Espacio de bÃºsqueda: 8 dimensiones
Fitting 3 folds for each of 25 candidates, totalling 75 fits
/home/diego/.local/lib/python3.12/site-packages/xgboost/training.py:199: UserWarning: [08:57:53] WARNING: /workspace/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)
/home/diego/.local/lib/python3.12/site-packages/xgboost/training.py:199: UserWarning: [08:57:53] WARNING: /workspace/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

...

  bst.update(dtrain, iteration=i, fobj=obj)
/home/diego/.local/lib/python3.12/site-packages/xgboost/training.py:199: UserWarning: [08:57:54] WARNING: /workspace/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)

ğŸ” âœ“ BÃºsqueda de hiperparÃ¡metros completada

ğŸ” Mejores hiperparÃ¡metros: {'subsample': 1.0, 'scale_pos_weight': 2.3333333333333335, 'n_estimators': 50, 'min_child_weight': 3, 'max_depth': 5, 'learning_rate': 0.05, 'gamma': 0.5, 'colsample_bytree': 0.6}

ğŸ” Mejor puntuaciÃ³n (average_precision): 0.9003

ğŸ” Entrenando modelo final con mejores hiperparÃ¡metros...

============================================================
CALIBRANDO PROBABILIDADES DEL MODELO
============================================================

ğŸ” Utilizando calibraciÃ³n isotÃ³nica para mejorar la confiabilidad de las probabilidades

ğŸ” âœ“ Modelo calibrado exitosamente

============================================================
EVALUANDO RENDIMIENTO DEL MODELO
============================================================

ğŸ” ğŸ“Š MÃ©tricas de rendimiento:

ğŸ” â€¢ Accuracy: 0.7350

ğŸ” â€¢ Precision: 0.8085

ğŸ” â€¢ Recall: 0.8143

ğŸ” â€¢ F1: 0.8114

ğŸ” â€¢ Roc Auc: 0.7586

ğŸ” â€¢ Pr Auc: 0.8596

ğŸ” Matriz de confusiÃ³n:
              PredicciÃ³n
            Malo (0)  Bueno (1)
Real Malo    [ 33       27]
Real Bueno   [ 26      114]

ğŸ” Reporte de clasificaciÃ³n detallado:
              precision    recall  f1-score   support

    Malo (0)       0.56      0.55      0.55        60
   Bueno (1)       0.81      0.81      0.81       140

    accuracy                           0.73       200
   macro avg       0.68      0.68      0.68       200
weighted avg       0.73      0.73      0.73       200


ğŸ” 
ğŸ” Umbral Ã³ptimo encontrado para maximizar F1: 0.1667

ğŸ” ğŸ“Š MÃ©tricas con umbral Ã³ptimo:

ğŸ” â€¢ Accuracy: 0.7450

ğŸ” â€¢ Precision: 0.7633

ğŸ” â€¢ Recall: 0.9214

ğŸ” â€¢ F1: 0.8350

============================================================
GENERANDO GRÃFICAS DE EVALUACIÃ“N
============================================================

ğŸ” âœ… GrÃ¡ficas ROC y PR generadas y guardadas

ğŸ” âœ… Matriz de confusiÃ³n generada y guardada

ğŸ” âœ… Curva de calibraciÃ³n generada y guardada

ğŸ” âœ… DistribuciÃ³n de probabilidades generada y guardada

============================================================
ANALIZANDO EQUIDAD DEL MODELO
============================================================

ğŸ” 
ğŸ‘¥ AnÃ¡lisis de equidad usando 'age' como proxy de edad:

ğŸ”   â€¢ Grupo 2 (96 muestras):

ğŸ”     - Demographic Parity (tasa de aprobaciÃ³n): 0.7500

ğŸ”     - Equal Opportunity (recall): 0.8857

ğŸ”   â€¢ Grupo 1 (104 muestras):

ğŸ”     - Demographic Parity (tasa de aprobaciÃ³n): 0.6635

ğŸ”     - Equal Opportunity (recall): 0.7429

ğŸ” 
ğŸ‘¥ AnÃ¡lisis de equidad usando 'status_sex_A91' como proxy de gÃ©nero:

ğŸ”   â€¢ Grupo A (192 muestras):

ğŸ”     - Demographic Parity (tasa de aprobaciÃ³n): 0.7135

ğŸ”     - Equal Opportunity (recall): 0.8175

============================================================
GENERANDO EXPLICACIONES DEL MODELO CON SHAP
============================================================

ğŸ” Calculando valores SHAP para explicabilidad global...

ğŸ” âœ… Importancia global de caracterÃ­sticas generada y guardada

ğŸ” âœ… GrÃ¡fico de resumen SHAP generado y guardado

ğŸ” 
ğŸ” Explicaciones locales para casos representativos:

ğŸ”   â€¢ Caso de alto riesgo (Ã­ndice 7)

ğŸ” âœ… ExplicaciÃ³n SHAP para caso de alto riesgo generada y guardada

ğŸ”   â€¢ Caso frontera (Ã­ndice 76, prob=0.5040)

ğŸ” âœ… ExplicaciÃ³n SHAP para caso frontera generada y guardada

============================================================
GUARDANDO ARTEFACTOS PARA DEPLOYMENT WEB
============================================================

ğŸ” âœ“ Modelo guardado en: /home/diego/PROGRAMACION/VPS/UPY/Files/9th_quarter/Business_Intelligence/PR3/Docs/models/credit_risk_model.pkl

ğŸ” âœ“ Diccionario de caracterÃ­sticas guardado en: /home/diego/PROGRAMACION/VPS/UPY/Files/9th_quarter/Business_Intelligence/PR3/Docs/models/feature_dictionary.csv

ğŸ” âœ“ ConfiguraciÃ³n para web guardada en: /home/diego/PROGRAMACION/VPS/UPY/Files/9th_quarter/Business_Intelligence/PR3/Docs/models/web_config.json

ğŸ” âœ“ MÃ©tricas del modelo guardadas en: /home/diego/PROGRAMACION/VPS/UPY/Files/9th_quarter/Business_Intelligence/PR3/Docs/models/model_metrics.json

============================================================
GENERANDO REPORTE FINAL DEL MODELO
============================================================

ğŸ” 
REPORTE DEL MODELO DE RIESGO CREDITICIO
============================================================
Fecha de generaciÃ³n: 2025-11-13 08:57:59
Modelo: Modelo de Riesgo Crediticio (versiÃ³n 1.0)

DESEMPEÃ‘O EN CONJUNTO DE PRUEBA:
------------------------------------------------------------
â€¢ Recall (Capacidad para detectar malos pagadores): 0.8143
â€¢ PrecisiÃ³n (Exactitud en aprobaciones): 0.8085
â€¢ F1-Score (Balance): 0.8114
â€¢ AUC-ROC (Capacidad de discriminaciÃ³n): 0.7586
â€¢ AUC-PR (Robustez ante desbalance): 0.8596

CONFIGURACIÃ“N DEL MODELO:
------------------------------------------------------------
â€¢ Umbral de decisiÃ³n Ã³ptimo: 0.1667
â€¢ CaracterÃ­sticas utilizadas: 66
â€¢ Clases objetivo: Alto riesgo - No aprobar crÃ©dito, Bajo riesgo - Aprobar crÃ©dito

RECOMENDACIONES OPERATIVAS:
------------------------------------------------------------
â€¢ Utilizar el umbral Ã³ptimo de 0.1667 para balancear detecciÃ³n de riesgo y oportunidades de negocio
â€¢ Monitorear periÃ³dicamente las mÃ©tricas de desempeÃ±o y equidad
â€¢ Realizar recalibraciÃ³n cada 6 meses o cuando se observe desviaciÃ³n significativa en las mÃ©tricas
â€¢ Revisar las decisiones en los casos frontera (probabilidades cercanas al umbral)
â€¢ Auditar las decisiones para diferentes segmentos demogrÃ¡ficos para garantizar equidad

ARTEFACTOS GENERADOS:
------------------------------------------------------------
â€¢ Modelo entrenado: /home/diego/PROGRAMACION/VPS/UPY/Files/9th_quarter/Business_Intelligence/PR3/Docs/models/credit_risk_model.pkl
â€¢ ConfiguraciÃ³n para web: /home/diego/PROGRAMACION/VPS/UPY/Files/9th_quarter/Business_Intelligence/PR3/Docs/models/web_config.json
â€¢ Diccionario de caracterÃ­sticas: /home/diego/PROGRAMACION/VPS/UPY/Files/9th_quarter/Business_Intelligence/PR3/Docs/models/feature_dictionary.csv
â€¢ MÃ©tricas completas: /home/diego/PROGRAMACION/VPS/UPY/Files/9th_quarter/Business_Intelligence/PR3/Docs/models/model_metrics.json
â€¢ Visualizaciones: /home/diego/PROGRAMACION/VPS/UPY/Files/9th_quarter/Business_Intelligence/PR3/Docs
    

============================================================
PIPELINE DE MODELADO COMPLETADO EXITOSAMENTE
============================================================

ğŸ” El modelo estÃ¡ listo para ser implementado en la aplicaciÃ³n web

ğŸ” Artefactos guardados en: /home/diego/PROGRAMACION/VPS/UPY/Files/9th_quarter/Business_Intelligence/PR3/Docs/models    